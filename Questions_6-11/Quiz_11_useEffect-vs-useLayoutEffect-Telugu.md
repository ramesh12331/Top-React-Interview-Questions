# ЁЯзй useEffect vs useLayoutEffect in React (р░др▒Жр░▓р▒Бр░Чр▒Б р░╡р▒Жр░░р▒Нр░╖р░ир▒Н)

ReactтАМр░▓р▒Л **`useEffect`** р░ор░░р░┐р░пр▒Б **`useLayoutEffect`** р░Ер░ир▒Зр░╡р░┐ р░░р▒Жр░Вр░бр▒Б Hooks, р░Зр░╡р░┐ **side effects** (р░░р▒Жр░Вр░бр░░р░┐р░Вр░Чр▒НтАМр░Хр░┐ р░╡р▒Жр░▓р▒Бр░кр░▓ р░Ьр░░р░┐р░Чр▒З р░Ър░░р▒Нр░пр░▓р▒Б) р░ир░┐р░░р▒Нр░╡р░╣р░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐ р░Йр░кр░пр▒Лр░Чр░┐р░╕р▒Нр░др░╛р░░р▒Б.  
р░Йр░жр░╛р░╣р░░р░гр░Хр▒Б:

- р░бр▒Зр░Яр░╛ р░лр▒Жр░Ър▒Нр░Ър░┐р░Вр░Чр▒Н (API р░Хр░╛р░▓р▒Нр░╕р▒Н)  
- DOM р░ор░╛р░ир░┐р░кр▒Нр░пр▒Бр░▓р▒Зр░╖р░ир▒Н  
- р░Ир░╡р▒Жр░Вр░Яр▒Н р░▓р░┐р░╕р░ир░░р▒Нр░╕р▒Н (subscriptions)  

р░И р░░р▒Жр░Вр░бр░┐р░Вр░Яр░┐ р░ор░зр▒Нр░п р░кр▒Нр░░р░зр░╛р░и р░др▒Зр░бр░╛ тАФ **р░Ор░кр▒Нр░кр▒Бр░бр▒Б р░Ер░╡р░┐ р░ир░бр▒Бр░╕р▒Нр░др░╛р░пр░┐** р░Ер░ир▒Нр░ир░жр░┐.

---

## тЪЩя╕П р░Ер░ор░▓р▒Б (Execution) р░╕р░ор░п р░др▒Зр░бр░╛

| р░Ер░Вр░╢р░В | useEffect | useLayoutEffect |
|:------|:-----------|:----------------|
| **р░Ор░кр▒Нр░кр▒Бр░бр▒Б р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐** | Component р░░р▒Жр░Вр░бр░░р▒Н р░Ер░пр░┐, Browser р░╕р▒Нр░Хр▒Нр░░р▒Ар░ир▒Н р░кр▒Ир░и р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░Ър▒Зр░╕р░┐р░и р░др░░р▒Нр░╡р░╛р░д | React DOMтАМр░ир▒Б р░Ер░кр▒НтАМр░бр▒Зр░Яр▒Н р░Ър▒Зр░╕р░┐р░и р░╡р▒Жр░Вр░Яр░ир▒З р░Хр░╛р░ир▒А **Browser р░кр▒Ир░и р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░Ър▒Зр░пр░Хр░ор▒Бр░Вр░жр▒Б** |
| **р░░р▒Жр░Вр░бр░░р░┐р░Вр░Чр▒НтАМр░ир▒Б р░Ер░бр▒Нр░бр▒Бр░Хр▒Бр░Вр░Яр▒Бр░Вр░жр░╛?** | тЭМ р░Хр░╛р░жр▒Б (р░Ер░╕р░┐р░Вр░Хр▒Нр░░р▒Лр░ир░╕р▒НтАМр░Чр░╛ р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐) | тЬЕ р░Ер░╡р▒Бр░ир▒Б (р░╕р░┐р░Вр░Хр▒Нр░░р▒Лр░ир░╕р▒НтАМр░Чр░╛ р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐) |
| **р░Йр░кр░пр▒Лр░Чр░╛р░▓р▒Б** | API р░Хр░╛р░▓р▒Нр░╕р▒Н, р░Ир░╡р▒Жр░Вр░Яр▒Нр░╕р▒Н, р░▓р░╛р░Чр░┐р░Вр░Чр▒Н, р░бр▒Зр░Яр░╛ р░лр▒Жр░Ър▒Нр░Ър░┐р░Вр░Чр▒Н | DOM р░Хр▒Кр░▓р░др░▓р▒Б, Layout р░╕р░┐р░Вр░Хр▒Нр░░р░ир▒Ир░Ьр▒Зр░╖р░ир▒Н, Animation р░▓р▒Б |
| **Performance** | р░╡р▒Зр░Чр░Вр░Чр░╛ р░Йр░Вр░Яр▒Бр░Вр░жр░┐ | р░др░кр▒Нр░кр▒Бр░Чр░╛ р░Йр░кр░пр▒Лр░Чр░┐р░╕р▒Нр░др▒З р░Ьр▒Нр░пр░╛р░Вр░Хр▒Н (р░Ьр░░р▒Бр░Чр▒Б р░▓р▒Лр░кр░╛р░▓р▒Б) р░Хр░▓р▒Бр░Чр▒Бр░др░╛р░пр░┐ |

---

## ЁЯза р░нр░╛р░╡р░ир░╛р░др▒Нр░ор░Хр░Вр░Чр░╛ р░Ер░░р▒Нр░ер░В р░Ър▒Зр░╕р▒Бр░Хр▒Лр░╡р░бр░В

ReactтАМр░ир░┐ р░Тр░Х **р░Ър░┐р░др▒Нр░░р░Хр░╛р░░р▒Бр░бр▒Б ЁЯзСтАНЁЯОи** р░Ер░ир▒Бр░Хр▒Лр░Вр░бр░┐:

- **`useEffect`** тЖТ р░Ър░┐р░др▒Нр░░р░Хр░╛р░░р▒Бр░бр▒Б р░кр▒Жр░пр░┐р░Вр░Яр░┐р░Вр░Чр▒Н р░кр▒Вр░░р▒Нр░др░┐ р░Ър▒Зр░╕р░┐р░и **р░др░░р▒Нр░╡р░╛р░д** р░кр░ир░┐ р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐.  
- **`useLayoutEffect`** тЖТ р░кр▒Жр░пр░┐р░Вр░Яр░┐р░Вр░Чр▒Н **р░ор▒Бр░Вр░жр▒Б** DOM р░╕р░░р░┐р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░Ер░╡р░Хр░╛р░╢р░В р░Зр░╕р▒Нр░др▒Бр░Вр░жр░┐.

---

## ЁЯзй р░Йр░жр░╛р░╣р░░р░г:

```jsx
import React, { useEffect, useLayoutEffect, useRef, useState } from "react";

function Example() {
  const [width, setWidth] = useState(0);
  const boxRef = useRef();

  // р░кр▒Жр░пр░┐р░Вр░Яр▒НтАМр░Хр░┐ р░ор▒Бр░Вр░жр▒Б р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐
  useLayoutEffect(() => {
    console.log("ЁЯз▒ useLayoutEffect: Layout р░Хр▒Кр░▓р▒Бр░╕р▒Нр░др▒Лр░Вр░жр░┐...");
    setWidth(boxRef.current.offsetWidth);
  }, []);

  // р░кр▒Жр░пр░┐р░Вр░Яр▒НтАМ р░др░░р▒Нр░╡р░╛р░д р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐
  useEffect(() => {
    console.log("ЁЯОи useEffect: UI р░Зр░кр▒Нр░кр░Яр░┐р░Хр▒З р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░Ер░пр░┐р░Вр░жр░┐, width:", width);
  }, [width]);

  return (
    <div
      ref={boxRef}
      style={{
        width: "50%",
        height: "100px",
        background: "lightblue",
        margin: "20px",
      }}
    >
      Width: {width}px
    </div>
  );
}

export default Example;
```

---

## ЁЯФН р░жр░╢р░▓р░╡р░╛р░░р▒Ар░Чр░╛ р░Пр░В р░Ьр░░р▒Бр░Чр▒Бр░др▒Бр░Вр░жр░┐

1я╕ПтГг React `<div>` р░ир▒Б р░░р▒Жр░Вр░бр░░р▒Н р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐ тАФ DOM р░Ер░кр▒НтАМр░бр▒Зр░Яр▒Н р░Ер░╡р▒Бр░др▒Бр░Вр░жр░┐.  
2я╕ПтГг `useLayoutEffect` р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐ тАФ `offsetWidth` р░Хр▒Кр░▓р▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐ (р░кр▒Жр░пр░┐р░Вр░Яр▒НтАМр░Хр░┐ р░ор▒Бр░Вр░жр▒Б).  
3я╕ПтГг р░Ер░жр░┐ `width` state р░ор░╛р░░р▒Нр░Ър▒Бр░др▒Бр░Вр░жр░┐ тЖТ Re-render р░Ьр░░р▒Бр░Чр▒Бр░др▒Бр░Вр░жр░┐.  
4я╕ПтГг Browser р░Ър░┐р░╡р░░р░┐ UIр░ир▒Б р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐.  
5я╕ПтГг `useEffect` р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐ тАФ р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░Ер░пр░┐р░и р░др░░р▒Нр░╡р░╛р░д р░▓р░╛р░Чр▒Н р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐.

---

## ЁЯЪл р░╕р░╛р░зр░╛р░░р░г р░др░кр▒Нр░кр▒Бр░▓р▒Б

| р░др░кр▒Нр░кр▒Б | р░Ор░Вр░жр▒Бр░Хр▒Б р░др░кр▒Нр░кр▒Бр░бр▒Б |
|:------|:----------------|
| API р░Хр░╛р░▓р▒Нр░╕р▒Н р░Хр▒Лр░╕р░В `useLayoutEffect` р░╡р░╛р░бр░Яр░В | р░░р▒Жр░Вр░бр░░р░┐р░Вр░Чр▒Н р░Ер░бр▒Нр░бр▒Бр░Хр▒Бр░Вр░Яр▒Бр░Вр░жр░┐, UX р░Ър▒Жр░бр▒Бр░др▒Бр░Вр░жр░┐ |
| Cleanup р░ор░░р▒Нр░Ър░┐р░кр▒Лр░╡р░бр░В | р░ор▒Жр░ор░░р▒А р░▓р▒Ар░Хр▒Н р░Ер░╡р▒Бр░др▒Бр░Вр░жр░┐ |
| р░░р▒Жр░Вр░бр▒Б hooks р░Тр░Хр▒Зр░▓р░╛ р░Ер░ир▒Бр░Хр▒Лр░╡р░бр░В | р░Хр░╛р░жр▒Б тАФ `useLayoutEffect` р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░Жр░▓р░╕р▒Нр░пр░В р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐ |

---

## ЁЯТб р░Йр░др▒Нр░др░о р░кр░жр▒Нр░зр░др▒Бр░▓р▒Б (Best Practices)

тЬЕ **`useEffect`** р░ир▒Б р░бр░┐р░лр░╛р░▓р▒Нр░Яр▒НтАМр░Чр░╛ р░╡р░╛р░бр░Вр░бр░┐ тАФ р░Зр░жр░┐ р░╡р▒Зр░Чр░╡р░Вр░др░ор▒Ир░ир░жр░┐, р░Ер░╕р░┐р░Вр░Хр▒Нр░░р▒Лр░ир░╕р▒Н.  
тЬЕ **`useLayoutEffect`** р░ир▒Б р░Хр▒Зр░╡р░▓р░В р░И р░╕р░Вр░жр░░р▒Нр░нр░╛р░▓р▒Нр░▓р▒Л р░╡р░╛р░бр░Вр░бр░┐:
- DOM р░Хр▒Кр░▓р░╡р░╛р░▓р░┐ р░▓р▒Зр░жр░╛ р░╕р░░р░┐р░Ър▒Зр░пр░╛р░▓р░┐.
- Animation р░▓р▒Зр░жр░╛ Scroll р░╕р░Вр░мр░Вр░зр░┐р░д р░кр░ир▒Бр░▓р▒Б р░Ър▒Зр░пр░╛р░▓р░┐.

тЬЕ р░Ор░▓р▒Нр░▓р░кр▒Нр░кр▒Бр░бр▒В Cleanup р░Ър▒Зр░пр░Вр░бр░┐:

```jsx
useEffect(() => {
  const handleResize = () => console.log("Resized");
  window.addEventListener("resize", handleResize);
  return () => window.removeEventListener("resize", handleResize);
}, []);
```

---

## ЁЯзй р░Зр░Вр░Яр░░р▒Нр░╡р▒Нр░пр▒В р░╕р░ир▒Нр░ир░┐р░╡р▒Зр░╢р░╛р░▓р▒Б

**ЁЯЧг р░╕р░ир▒Нр░ир░┐р░╡р▒Зр░╢р░В 1:**  
> тАЬр░ир▒Зр░ир▒Б DOM р░Хр▒Кр░▓р▒Бр░╕р▒Нр░др▒Бр░ир▒Нр░ир░кр▒Нр░кр▒Бр░бр▒Б UI р░лр▒Нр░▓р░┐р░Хр░░р▒Н р░Ер░╡р▒Бр░др▒Лр░Вр░жр░┐!тАЭ  
ЁЯСЙ `useEffect` р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░др░░р▒Нр░╡р░╛р░д р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐. р░Хр░╛р░мр░Яр▒Нр░Яр░┐ DOM р░ор░╛р░░р▒Нр░кр▒Б р░пр▒Вр░Ьр░░р▒НтАМр░Хр░┐ р░Хр░ир░кр░бр▒Бр░др▒Бр░Вр░жр░┐.  
тЬЕ **`useLayoutEffect`** р░╡р░╛р░бр░Вр░бр░┐.

---

**ЁЯЧг р░╕р░ир▒Нр░ир░┐р░╡р▒Зр░╢р░В 2:**  
> тАЬр░Ор░кр▒Нр░кр▒Бр░бр▒Б `useLayoutEffect` р░╡р░╛р░бр░Хр▒Вр░бр░жр▒Б?тАЭ  
ЁЯСЙ LayoutтАМр░Хр░┐ р░╕р░Вр░мр░Вр░зр░В р░▓р▒Зр░ир░┐ р░кр░ир▒Бр░▓ р░Хр▒Лр░╕р░В (API р░Хр░╛р░▓р▒Нр░╕р▒Н, р░▓р░╛р░Чр░┐р░Вр░Чр▒Н р░ор▒Кр░жр░▓р▒Ир░ир░╡р░┐).

---

**ЁЯЧг р░╕р░ир▒Нр░ир░┐р░╡р▒Зр░╢р░В 3:**  
> тАЬр░Ор░Вр░жр▒Бр░Хр▒Б `useLayoutEffect` blockingтАМр░Чр░╛ р░Йр░Вр░Яр▒Бр░Вр░жр░┐?тАЭ  
ЁЯСЙ р░Зр░жр░┐ DOM р░ор░╛р░░р▒Нр░кр▒Бр░▓р▒Б р░кр▒Вр░░р▒Нр░др░пр▒Нр░пр▒Зр░╡р░░р░Хр▒Б browser р░кр▒Жр░пр░┐р░Вр░Яр▒НтАМр░ир░┐ р░ир░┐р░▓р░┐р░кр▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐ тАФ consistent layout р░Хр▒Лр░╕р░В.

---

## ЁЯз╛ р░╕р░╛р░░р░╛р░Вр░╢р░В

| Hook | р░Ор░кр▒Нр░кр▒Бр░бр▒Б р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐ | р░Йр░кр░пр▒Лр░Чр░В | Blocking? |
|:------|:------------------|:--------|:-----------|
| **useEffect** | р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░др░░р▒Нр░╡р░╛р░д | API р░Хр░╛р░▓р▒Нр░╕р▒Н, р░▓р░╛р░Чр▒Нр░╕р▒Н, р░Ир░╡р▒Жр░Вр░Яр▒Нр░╕р▒Н | тЭМ р░Хр░╛р░жр▒Б |
| **useLayoutEffect** | р░кр▒Жр░пр░┐р░Вр░Яр▒Н р░ор▒Бр░Вр░жр▒Б | DOM р░Хр▒Кр░▓р░др░▓р▒Б, layout sync, animations | тЬЕ р░Ер░╡р▒Бр░ир▒Б |

---

## ЁЯТм р░╕р░Вр░Хр▒Нр░╖р░┐р░кр▒Нр░др░Вр░Чр░╛

> ЁЯзй **`useEffect`** тЖТ р░кр▒Жр░пр░┐р░Вр░Яр▒НтАМ р░др░░р▒Бр░╡р░╛р░д Side Effects р░Хр▒Лр░╕р░В.  
> ЁЯз▒ **`useLayoutEffect`** тЖТ DOM р░ор░╛р░░р▒Нр░кр▒Бр░▓ р░Хр▒Лр░╕р░В р░кр▒Жр░пр░┐р░Вр░Яр▒НтАМр░Хр▒Б р░ор▒Бр░Вр░жр▒З.

---

**тЬНя╕П р░░р░Ър░пр░┐р░д:** _р░ор░ор░┐р░бр░┐ р░░р░ор▒Зр░╖р▒Н_  
**ЁЯУШ р░╡р░┐р░╖р░пр░В:** React Hooks тАФ `useEffect` vs `useLayoutEffect`  
**ЁЯЧВя╕П р░╡р░░р▒Нр░Чр░В:** Frontend / React.js  
