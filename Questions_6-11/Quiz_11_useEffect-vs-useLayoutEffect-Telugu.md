# 11. React р░▓р▒Л useEffect р░ор░░р░┐р░пр▒Б useLayoutEffect р░ор░зр▒Нр░п р░др▒Зр░бр░╛

React р░▓р▒Л **`useEffect`** р░ор░░р░┐р░пр▒Б **`useLayoutEffect`** р░Ер░ир▒З р░░р▒Жр░Вр░бр▒Б Hooks р░ир░┐ **side effects** р░Хр▒Лр░╕р░В р░Йр░кр░пр▒Лр░Чр░┐р░╕р▒Нр░др░╛р░░р▒Б тАФ р░Ер░Вр░Яр▒З, р░Хр░╛р░Вр░кр▒Кр░ир▒Жр░Вр░Яр▒Н р░░р▒Жр░Вр░бр░░р▒Н р░╕р▒Ир░Хр░┐р░▓р▒Н (rendering cycle) р░мр░пр░Я р░Ьр░░р░┐р░Чр▒З р░Ър░░р▒Нр░пр░▓р▒Б, р░Йр░жр░╛р░╣р░░р░гр░Хр▒Б:

- API р░ир▒Бр░Вр░бр░┐ р░бр▒Зр░Яр░╛ р░др▒Жр░Ър▒Нр░Ър▒Бр░Хр▒Лр░╡р░бр░В  
- DOM р░ир▒Б р░ор░╛р░░р▒Нр░Ър░бр░В  
- р░Ир░╡р▒Жр░Вр░Яр▒Н р░▓р░┐р░╕р░ир░░р▒Нр░╕р▒Н (add/remove) р░Ьр▒Лр░бр░┐р░Вр░Ър░бр░В  
- р░Яр▒Ир░ор░░р▒Нр░▓р▒Б р░▓р▒Зр░жр░╛ р░пр░╛р░ир░┐р░ор▒Зр░╖р░ир▒Нр░▓р▒Б р░ир░бр░кр░бр░В  

р░Зр░╡р░┐ р░░р▒Жр░Вр░бр░┐р░Вр░Яр░┐ р░ор░зр▒Нр░п **р░ор▒Бр░Цр▒Нр░пр░ор▒Ир░и р░др▒Зр░бр░╛** р░Пр░ор░┐р░Яр░Вр░Яр▒З тАФ р░Ер░╡р░┐ React р░▓р▒Лр░ир░┐ **р░Ьр▒Ар░╡р░и р░Ър░Хр▒Нр░░р░В (lifecycle)** р░▓р▒Л **р░Ор░кр▒Нр░кр▒Бр░бр▒Б** р░ир░бр▒Бр░╕р▒Нр░др░╛р░пр░ир▒Нр░ир░жр░┐.

---

## тЪЩя╕П р░Ор░Чр▒Нр░Ьр░┐р░Хр▒Нр░пр▒Вр░╖р░ир▒Н р░Яр▒Ир░ор░┐р░Вр░Чр▒Н р░др▒Зр░бр░╛

| р░Ер░Вр░╢р░В | useEffect | useLayoutEffect |
| :------------- | :--------- | :--------------- |
| **р░Ор░кр▒Нр░кр▒Бр░бр▒Б р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐** | р░Хр░╛р░Вр░кр▒Кр░ир▒Жр░Вр░Яр▒Н р░░р▒Жр░Вр░бр░░р▒Н р░Ер░пр▒Нр░пр░┐ **р░мр▒Нр░░р▒Мр░Ьр░░р▒Н р░╕р▒Нр░Хр▒Нр░░р▒Ар░ир▒Н р░кр▒И UI р░Ър▒Вр░кр░┐р░Вр░Ър░┐р░и р░др░░р▒Нр░╡р░╛р░д** | React DOM р░ир▒Б р░Ер░кр▒Нр░бр▒Зр░Яр▒Н р░Ър▒Зр░╕р░┐р░и р░╡р▒Жр░Вр░Яр░ир▒З р░Хр░╛р░ир▒А **р░мр▒Нр░░р▒Мр░Ьр░░р▒Н р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Ър▒Зр░пр░Хр░ор▒Бр░Вр░жр▒З** |
| **Render blocking** | тЭМ Non-blocking (р░Ер░╕р░┐р░Вр░Хр▒Нр░░р░ир░╕р▒Н) | тЬЕ Blocking (р░╕р░┐р░Вр░Хр▒Нр░░р░ир░╕р▒Н) тАФ р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Ер░пр▒Нр░пр▒З р░╡р░░р░Хр▒Б р░Жр░кр▒Бр░др▒Бр░Вр░жр░┐ |
| **р░Йр░кр░пр▒Лр░Чр░╛р░▓р▒Б** | Data fetching, event listeners, async tasks | DOM р░Хр▒Кр░▓р░др░▓р▒Б (measurements), р░▓р▒Зр░Ер░╡р▒Бр░Яр▒Н р░╕р░░р▒Нр░жр▒Бр░мр░╛р░Яр▒Б, animations |
| **Performance** | р░Ър░╛р░▓р░╛ р░╕р░Вр░жр░░р▒Нр░нр░╛р░▓р▒Нр░▓р▒Л р░ор▒Жр░░р▒Бр░Чр▒Ир░ир░жр░┐ | р░Ор░Хр▒Нр░Хр▒Бр░╡ р░мр░░р▒Бр░╡р▒Бр░Чр░╛ р░Йр░Вр░Яр▒Бр░Вр░жр░┐, р░╕р░░р▒Ир░и р░░р▒Ар░др░┐р░▓р▒Л р░╡р░╛р░бр░Хр░кр▒Лр░др▒З lag р░Хр░▓р░Чр░╡р░Ър▒Нр░Ър▒Б |

---

## ЁЯза р░╕р▒Бр░▓р░нр░Вр░Чр░╛ р░Ер░░р▒Нр░ер░ор░пр▒Нр░пр▒З р░╡р░┐р░╡р░░р░г

React р░ир░┐ р░Тр░Х **р░Ър░┐р░др▒Нр░░р░Хр░╛р░░р▒Бр░бр░┐р░Чр░╛ (Painter ЁЯзСтАНЁЯОи)** р░Кр░╣р░┐р░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐ тАФ  

- **`useEffect`** тЖТ р░Ър░┐р░др▒Нр░░р░Хр░╛р░░р▒Бр░бр▒Б р░Ър░┐р░др▒Нр░░р░В р░╡р▒Зр░╕р░┐ р░кр▒Вр░░р▒Нр░др░пр▒Нр░пр░╛р░Х р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐ (UI р░пр▒Вр░Ьр░░р▒НтАМр░Хр░┐ р░Хр░ир░мр░бр░┐р░и р░др░░р▒Нр░╡р░╛р░д).  
- **`useLayoutEffect`** тЖТ р░Ър░┐р░др▒Нр░░р░В р░╡р▒Зр░╕р▒З р░ор▒Бр░Вр░жр▒Б DOM р░ир▒Б р░╕р░░р░┐р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐ (р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Хр░Вр░Яр▒З р░ор▒Бр░Вр░жр▒Б).

---

## ЁЯзй р░Йр░жр░╛р░╣р░░р░г: р░Яр▒Ир░ор░┐р░Вр░Чр▒Н р░др▒Зр░бр░╛

```jsx
import React, { useEffect, useLayoutEffect } from "react";

function Example() {
  useLayoutEffect(() => {
    console.log("ЁЯз▒ useLayoutEffect: р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Хр░Вр░Яр▒З р░ор▒Бр░Вр░жр▒Б р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐");
  }, []);

  useEffect(() => {
    console.log("ЁЯОи useEffect: р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Ер░пр░┐р░и р░др░░р▒Нр░╡р░╛р░д р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐");
  }, []);

  return <h1>Hello React!</h1>;
}

export default Example;
```

**Console Output р░Хр▒Нр░░р░ор░В:**  
1я╕ПтГг `ЁЯз▒ useLayoutEffect`  
2я╕ПтГг р░мр▒Нр░░р▒Мр░Ьр░░р▒Н UI р░ир░┐ р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐  
3я╕ПтГг `ЁЯОи useEffect`  

---

## ЁЯз╛ р░Ор░кр▒Нр░кр▒Бр░бр▒Б р░Пр░жр░┐ р░╡р░╛р░бр░╛р░▓р░┐?

| Use Case | р░╕р░░р▒Ир░и Hook |
| :---------------------------- | :------------------ |
| API р░ир▒Бр░Вр░бр░┐ р░бр▒Зр░Яр░╛ р░др▒Жр░Ър▒Нр░Ър▒Бр░Хр▒Лр░╡р░бр░В | тЬЕ useEffect |
| р░▓р░╛р░Чр░┐р░Вр░Чр▒Н / р░Ер░ир░▓р░┐р░Яр░┐р░Хр▒Нр░╕р▒Н | тЬЕ useEffect |
| р░Ир░╡р▒Жр░Вр░Яр▒Н р░▓р░┐р░╕р░ир░░р▒Нр░╕р▒Н (resize, scroll) | тЬЕ useEffect |
| р░Ор░▓р░┐р░ор▒Жр░Вр░Яр▒Н р░╕р▒Ир░Ьр▒Б / р░кр▒Кр░Ьр░┐р░╖р░ир▒Н р░Хр▒Кр░▓р░╡р░бр░В | тЬЕ useLayoutEffect |
| р░╕р▒Нр░Хр▒Нр░░р▒Ар░ир▒Н р░Ър▒Вр░кр▒З р░ор▒Бр░Вр░жр▒Б р░пр░╛р░ир░┐р░ор▒Зр░╖р░ир▒Нр░╕р▒Н | тЬЕ useLayoutEffect |

---

## тЪая╕П р░╕р░╛р░зр░╛р░░р░г р░др░кр▒Нр░кр▒Бр░▓р▒Б

| р░др░кр▒Нр░кр▒Б | р░Ор░Вр░жр▒Бр░Хр▒Б р░др░кр▒Нр░кр▒Б |
| :-------------------------- | :----------------------------------- |
| API р░Хр░╛р░▓р▒Нр░╕р▒Н р░Хр▒Лр░╕р░В useLayoutEffect р░╡р░╛р░бр░Яр░В | р░░р▒Зр░Вр░бр░░р░┐р░Вр░Чр▒НтАМр░ир▒Б р░Жр░кр▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐ тЖТ р░пр▒Вр░Ьр░░р▒Н р░Ер░ир▒Бр░нр░╡р░В р░Ър▒Жр░бр▒Бр░др▒Бр░Вр░жр░┐ |
| Cleanup р░ор░░р▒Нр░Ър░┐р░кр▒Лр░╡р░бр░В | р░ор▒Жр░ор░░р▒А р░▓р▒Ар░Хр▒Нр░╕р▒Н р░Ер░╡р▒Бр░др░╛р░пр░┐ |
| р░░р▒Жр░Вр░бр▒В р░Тр░Хр▒З р░Ер░ир▒Бр░Хр▒Лр░╡р░бр░В | р░Хр░╛р░жр▒Б тАФ useLayoutEffect р░╕р▒Нр░Хр▒Нр░░р▒Ар░ир▒Н р░кр▒Зр░пр░┐р░Вр░Яр▒НтАМр░ир▒Б р░Жр░▓р░╕р▒Нр░пр░В р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐ |

---

## ЁЯТб р░Йр░др▒Нр░др░о р░кр░жр▒Нр░зр░др▒Бр░▓р▒Б

тЬЕ р░Ор░Хр▒Нр░Хр▒Бр░╡р░Чр░╛ **useEffect** р░ир▒З р░╡р░╛р░бр░╛р░▓р░┐ тАФ р░Зр░жр░┐ р░Ер░╕р░┐р░Вр░Хр▒Нр░░р░ир░╕р▒Н, р░╡р▒Зр░Чр░Вр░Чр░╛ р░Йр░Вр░Яр▒Бр░Вр░жр░┐.  
тЬЕ **useLayoutEffect** р░╡р░╛р░бр░╛р░▓р░┐ р░Ер░Вр░Яр▒З:  
  - DOM р░Хр▒Кр░▓р░др░▓р▒Б р░▓р▒Зр░жр░╛ р░▓р▒Зр░Ер░╡р▒Бр░Яр▒Н р░╕р░░р▒Нр░жр▒Бр░мр░╛р░Яр▒Б р░Ър▒Зр░пр░╛р░▓р▒Нр░╕р░┐р░ир░кр▒Нр░кр▒Бр░бр▒Б р░ор░╛р░др▒Нр░░р░ор▒З  
  - р░пр░╛р░ир░┐р░ор▒Зр░╖р░ир▒Нр░╕р▒Н р░▓р▒Зр░жр░╛ р░╕р▒Нр░Хр▒Нр░░р▒Лр░▓р▒Н р░кр▒Кр░Ьр░┐р░╖р░ир▒Н р░╕р░░р▒Нр░жр▒Бр░мр░╛р░Яр▒Б р░Ър▒Зр░пр░╛р░▓р░ир░┐р░кр░┐р░Вр░Ър░┐р░ир░кр▒Нр░кр▒Бр░бр▒Б  

тЬЕ р░Ор░▓р▒Нр░▓р░кр▒Нр░кр▒Бр░бр▒В cleanup р░Ър▒Зр░пр░бр░В р░ор░░р▒Нр░Ър░┐р░кр▒Лр░Хр░Вр░бр░┐ ЁЯСЗ

```jsx
useEffect(() => {
  const handleResize = () => console.log("Resized");
  window.addEventListener("resize", handleResize);
  return () => window.removeEventListener("resize", handleResize);
}, []);
```

---

## ЁЯзй р░Зр░Вр░Яр░░р▒Нр░╡р▒Нр░пр▒В р░кр▒Нр░░р░╢р▒Нр░ир░▓р▒Б

**ЁЯЧг р░╕р▒Ар░ир░╛р░░р░┐р░пр▒Л 1:**  
> useEffect р░╡р░╛р░бр░┐р░др▒З DOM р░ор░╛р░░р▒Нр░Ър░┐р░и р░др░░р▒Нр░╡р░╛р░д UI р░▓р▒Л р░лр▒Нр░▓р░┐р░Хр░░р▒Н р░Ор░Вр░жр▒Бр░Хр▒Б р░╡р░╕р▒Нр░др▒Бр░Вр░жр░┐?  
ЁЯСЙ р░Ор░Вр░жр▒Бр░Хр░Вр░Яр▒З р░Зр░жр░┐ р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Ер░пр░┐р░и р░др░░р▒Нр░╡р░╛р░д р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐. р░Хр░╛р░мр░Яр▒Нр░Яр░┐ useLayoutEffect р░╡р░╛р░бр░╛р░▓р░┐.

**ЁЯЧг р░╕р▒Ар░ир░╛р░░р░┐р░пр▒Л 2:**  
> р░Ор░кр▒Нр░кр▒Бр░бр▒Б useLayoutEffect р░╡р░╛р░бр░Хр▒Вр░бр░жр▒Б?  
ЁЯСЙ Layout р░ор░╛р░░р▒Нр░Ър░ир░┐ side effects (API calls, logs) р░Хр▒Лр░╕р░В.

**ЁЯЧг р░╕р▒Ар░ир░╛р░░р░┐р░пр▒Л 3:**  
> useLayoutEffect р░Ор░Вр░жр▒Бр░Хр▒Б blocking?  
ЁЯСЙ р░Зр░жр░┐ DOM update р░Ер░пр▒Нр░пр░╛р░Х layout р░Ър░жр░┐р░╡р░┐ р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░ор▒Бр░Вр░жр▒Б р░╡р▒Зр░Ър░┐ р░Йр░Вр░Яр▒Бр░Вр░жр░┐ тАФ consistent layout р░Хр▒Лр░╕р░В.

---

## ЁЯз╛ р░╕р░╛р░░р░╛р░Вр░╢р░В

| Hook | р░Ор░кр▒Нр░кр▒Бр░бр▒Б р░ир░бр▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐ | р░Йр░кр░пр▒Лр░Чр░╛р░▓р▒Б | Blocking? |
| :------ | :---------------- | :----------- | :---------- |
| **useEffect** | р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Ер░пр░┐р░и р░др░░р▒Нр░╡р░╛р░д | Data fetching, API, logs, subscriptions | тЭМ р░Хр░╛р░жр▒Б |
| **useLayoutEffect** | р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Хр░Вр░Яр▒З р░ор▒Бр░Вр░жр▒Б | DOM р░Хр▒Кр░▓р░др░▓р▒Б, layout sync, animations | тЬЕ р░Ер░╡р▒Бр░ир▒Б |

---

## ЁЯТм р░Тр░Х р░▓р▒Ир░ир▒НтАМр░▓р▒Л р░Ър▒Жр░кр▒Нр░кр░╛р░▓р░Вр░Яр▒З

> ЁЯзй useEffect тАФ р░░р▒Зр░Вр░бр░░р▒Н р░Ер░пр░┐р░и р░др░░р▒Нр░╡р░╛р░д side effects р░Ър▒Зр░пр░Вр░бр░┐.  
> ЁЯз▒ useLayoutEffect тАФ р░╕р▒Нр░Хр▒Нр░░р▒Ар░ир▒Н р░кр▒Зр░пр░┐р░Вр░Яр▒Н р░Хр░Вр░Яр▒З р░ор▒Бр░Вр░жр▒Б DOM р░Жр░зр░╛р░░р░┐р░д р░кр░ир▒Бр░▓р▒Б р░Ър▒Зр░пр░Вр░бр░┐.

---

**тЬНя╕П р░░р░Ър░пр░┐р░д:** *р░ор░ор░┐р░бр░┐ р░░р░ор▒Зр░╖р▒Н*  
**р░╡р░┐р░╖р░пр░В:** React Hooks тАФ useEffect vs useLayoutEffect  
**р░╡р░░р▒Нр░Чр░В:** Frontend / React.js ЁЯЪА
