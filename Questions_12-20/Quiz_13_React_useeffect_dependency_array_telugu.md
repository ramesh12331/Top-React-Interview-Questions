# âš›ï¸ 13. `useEffect` à°²à±‹ Dependency Array à°ªà±à°°à°­à°¾à°µà°‚ à°à°®à°¿à°Ÿà°¿?

## ğŸ§  à°¸à±à°²à°­à°®à±ˆà°¨ à°¨à°¿à°°à±à°µà°šà°¨à°‚ (Simple Definition)

React à°²à±‹ **`useEffect` à°¯à±Šà°•à±à°• dependency array** à°…à°¨à±‡à°¦à°¿ **effect à°à°ªà±à°ªà±à°¡à±, à°à°¨à±à°¨à°¿ à°¸à°¾à°°à±à°²à± à°°à°¨à± à°…à°µà±à°µà°¾à°²à±‹ à°¨à°¿à°¯à°‚à°¤à±à°°à°¿à°¸à±à°¤à±à°‚à°¦à°¿**.  
à°‡à°¦à°¿ React à°•à± à°šà±†à°¬à±à°¤à±à°‚à°¦à°¿ â€” â€œà°ˆ variables (dependencies) à°®à°¾à°°à°¿à°¤à±‡ à°®à°¾à°¤à±à°°à°®à±‡ effect à°®à°³à±à°²à±€ à°°à°¨à± à°šà±†à°¯à±à°¯à°¿.â€  
à°¦à±€à°‚à°¤à±‹ **à°…à°µà°¸à°°à°‚ à°²à±‡à°¨à°¿ re-renders** à°®à°°à°¿à°¯à± **stale data bugs** à°¨à°¿à°µà°¾à°°à°¿à°‚à°šà°¬à°¡à°¤à°¾à°¯à°¿.

---

## âš™ï¸ Syntax

```jsx
useEffect(() => {
  // Side effect logic (à°‰à°¦à°¾: API calls, DOM updates)
  return () => {
    // Cleanup logic (à°‰à°¦à°¾: intervals clear à°šà±‡à°¯à°¡à°‚)
  };
}, [dependency1, dependency2]);
```

### ğŸ”¹ Dependency Array à°…à°°à±à°¥à°‚

| Dependency Array | à°µà°¿à°µà°°à°£ |
| ---------------- | ------ |
| `[]` | Effect à°’à°•à±à°•à°¸à°¾à°°à°¿ à°®à°¾à°¤à±à°°à°®à±‡ à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ (mount à°¸à°®à°¯à°‚à°²à±‹) âœ… |
| `[var1, var2]` | `var1` à°²à±‡à°¦à°¾ `var2` à°®à°¾à°°à°¿à°¨à°ªà±à°ªà±à°¡à± à°®à°¾à°¤à±à°°à°®à±‡ à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ âœ… |
| *(Omitted)* | à°ªà±à°°à°¤à°¿ render à°¤à°°à±à°µà°¾à°¤ à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ âš ï¸ (performance à°¸à°®à°¸à±à°¯à°²à±) |

---

## ğŸ§© à°‰à°¦à°¾à°¹à°°à°£ 1 â€” Dependency Array à°²à±‡à°•à±à°‚à°¡à°¾

```jsx
useEffect(() => {
  console.log('Effect runs after every render');
  document.title = `Count: ${count}`;
}); // âš ï¸ No dependency array
```

ğŸ§  **à°µà°¿à°µà°°à°£:** à°ªà±à°°à°¤à°¿ render à°¤à°°à±à°µà°¾à°¤ effect à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ â€” à°ªà±†à°¦à±à°¦ à°…à°ªà±à°²à°¿à°•à±‡à°·à°¨à±à°²à°²à±‹ à°‡à°¦à°¿ performance à°¤à°—à±à°—à°¿à°¸à±à°¤à±à°‚à°¦à°¿.

---

## ğŸ§© à°‰à°¦à°¾à°¹à°°à°£ 2 â€” à°–à°¾à°³à±€ Dependency Array `[]`

```jsx
useEffect(() => {
  console.log('Effect runs once on mount');
  const timer = setInterval(() => {
    setCount(c => c + 1);
  }, 1000);
  return () => clearInterval(timer);
}, []);
```

âœ… Effect à°’à°•à±à°•à°¸à°¾à°°à°¿ à°®à°¾à°¤à±à°°à°®à±‡ mount à°¸à°®à°¯à°‚à°²à±‹ à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ â€” timers, API calls, event listeners à°•à±‹à°¸à°‚ à°¸à°°à±ˆà°¨à°¦à°¿.

---

## ğŸ§© à°‰à°¦à°¾à°¹à°°à°£ 3 â€” Dependency à°‰à°¨à±à°¨à°ªà±à°ªà±à°¡à± `[count]`

```jsx
useEffect(() => {
  console.log('Effect runs when count changes');
  document.title = `Clicked ${count} times`;
}, [count]);
```

âœ… Effect à°®à±Šà°¦à°Ÿà°¿à°¸à°¾à°°à°¿ render à°¸à°®à°¯à°‚à°²à±‹ à°®à°°à°¿à°¯à± **count à°®à°¾à°°à°¿à°¨à°ªà±à°ªà±à°¡à± à°®à°¾à°¤à±à°°à°®à±‡** à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿.

---

## âš ï¸ à°¸à°¾à°§à°¾à°°à°£ à°¤à°ªà±à°ªà±à°²à±

| âŒ à°¤à°ªà±à°ªà± | âš ï¸ à°«à°²à°¿à°¤à°‚ |
| -------- | -------- |
| Dependencies à°®à°°à±à°šà°¿à°ªà±‹à°µà°¡à°‚ | à°ªà°¾à°¤ data (stale closures) à°‰à°ªà°¯à±‹à°—à°¿à°‚à°šà°¬à°¡à±à°¤à±à°‚à°¦à°¿ |
| à°à°•à±à°•à±à°µ dependencies à°‡à°µà±à°µà°¡à°‚ | à°…à°µà°¸à°°à°‚ à°²à±‡à°¨à°¿ re-renders à°…à°µà±à°¤à°¾à°¯à°¿ |
| Array à°‡à°µà±à°µà°•à°ªà±‹à°µà°¡à°‚ | à°ªà±à°°à°¤à°¿ render à°•à± à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ |
| Dependencies à°¨à± effect à°²à±‹ mutate à°šà±‡à°¯à°¡à°‚ | Infinite loop à°…à°µà±à°¤à±à°‚à°¦à°¿ |

---

## âœ… Best Practices

âœ” Effect à°²à±‹ à°‰à°ªà°¯à±‹à°—à°¿à°‚à°šà°¿à°¨ à°ªà±à°°à°¤à°¿ variable/function à°¨à± dependency array à°²à±‹ à°‡à°µà±à°µà°¾à°²à°¿.  
âœ” `useCallback` à°²à±‡à°¦à°¾ `useMemo` à°µà°¾à°¡à°¿ unnecessary re-creations à°¨à± à°¨à°¿à°µà°¾à°°à°¿à°‚à°šà°¾à°²à°¿.  
âœ” `eslint-plugin-react-hooks` à°¨à± enable à°šà±‡à°¯à°¾à°²à°¿ (missing deps à°•à±‹à°¸à°‚).  
âœ” Cleanup logic à°à°ªà±à°ªà±à°¡à±‚ à°‡à°µà±à°µà°¾à°²à°¿.

---

## ğŸ§  Example â€” Stale Closure Bug

```jsx
useEffect(() => {
  const timer = setInterval(() => {
    console.log('Count:', count); // âŒ à°ªà°¾à°¤ à°µà°¿à°²à±à°µ à°šà±‚à°ªà°¿à°¸à±à°¤à±à°‚à°¦à°¿
    setCount(count + 1);
  }, 1000);
  return () => clearInterval(timer);
}, []);
```

âœ… **Fix:** `count` à°¨à± dependencies à°²à±‹ à°šà±‡à°°à±à°šà°¡à°‚ à°²à±‡à°¦à°¾ functional update à°µà°¾à°¡à°Ÿà°‚:

```jsx
useEffect(() => {
  const timer = setInterval(() => {
    setCount(c => c + 1);
  }, 1000);
  return () => clearInterval(timer);
}, []);
```

---

## ğŸ’¡ à°—à±à°°à±à°¤à±à°‚à°šà±à°•à±‹à°µà°¾à°²à±à°¸à°¿à°¨ Trick

| Dependency Type | Effect à°ªà±à°°à°µà°°à±à°¤à°¨ |
| --------------- | ---------------- |
| `[]` | à°’à°•à±à°•à°¸à°¾à°°à°¿ à°®à°¾à°¤à±à°°à°®à±‡ à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ âœ… |
| `[x]` | x à°®à°¾à°°à°¿à°¨à°ªà±à°ªà±à°¡à± à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ âœ… |
| None | à°ªà±à°°à°¤à°¿ render à°•à± à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿ âš ï¸ |

ğŸ§  **Trick:** â€œEmpty â†’ Once, Values â†’ When Changed, None â†’ Always.â€

---

## ğŸ’¬ Interview Questions

**Q1:** `useEffect` à°à°‚à°¦à±à°•à± à°à°•à±à°•à±à°µ à°¸à°¾à°°à±à°²à± à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿?  
ğŸ‘‰ Dependency array à°‡à°µà±à°µà°²à±‡à°¦à±, à°•à°¾à°¬à°Ÿà±à°Ÿà°¿ à°ªà±à°°à°¤à°¿ render à°¤à°°à±à°µà°¾à°¤ à°°à°¨à± à°…à°µà±à°¤à±à°‚à°¦à°¿.

**Q2:** Stale closure à°à°²à°¾ à°¨à°¿à°µà°¾à°°à°¿à°‚à°šà°¾à°²à°¿?  
ğŸ‘‰ à°…à°¨à±à°¨à°¿ dependencies à°¨à± array à°²à±‹ à°šà±‡à°°à±à°šà°¡à°‚ à°²à±‡à°¦à°¾ functional update à°µà°¾à°¡à°Ÿà°‚.

**Q3:** API call à°’à°•à°¸à°¾à°°à°¿ à°®à°¾à°¤à±à°°à°®à±‡ à°šà±‡à°¯à°¾à°²à°‚à°Ÿà±‡?  
ğŸ‘‰ Empty dependency array (`[]`) à°µà°¾à°¡à°¾à°²à°¿.

---

## ğŸ§¾ Short Interview Summary

> â€œ`useEffect` à°²à±‹ dependency array effect à°à°ªà±à°ªà±à°¡à± à°°à°¨à± à°…à°µà±à°µà°¾à°²à±‹ à°¨à°¿à°¯à°‚à°¤à±à°°à°¿à°¸à±à°¤à±à°‚à°¦à°¿.  
> à°–à°¾à°³à±€ array â†’ à°’à°•à±à°•à°¸à°¾à°°à°¿, values à°‰à°¨à±à°¨ array â†’ à°† values à°®à°¾à°°à°¿à°¨à°ªà±à°ªà±à°¡à±, array à°²à±‡à°•à°ªà±‹à°¤à±‡ â†’ à°ªà±à°°à°¤à°¿ render à°¤à°°à±à°µà°¾à°¤.  
> à°¸à°°à±ˆà°¨ dependencies à°µà°¾à°¡à°Ÿà°‚ à°µà°²à±à°² performance à°®à°°à°¿à°¯à± bug issues à°¨à°¿à°µà°¾à°°à°¿à°‚à°šà°µà°šà±à°šà±.â€

---

## âš¡ One-Line Trick

> ğŸ§  **Empty â†’ Once | With Variables â†’ On Change | None â†’ Always**

---

## ğŸ¨ Visual Summary Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        useEffect Hook        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dependency Array | Behavior  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ None            â”‚ Every render âš ï¸ â”‚
â”‚ []              â”‚ Once (on mount) âœ… â”‚
â”‚ [var]           â”‚ When var changes âœ… â”‚
â”‚ [a, b, c]       â”‚ When a, b, or c changes âœ… â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Author:** *Mamidi Ramesh*  
**Topic:** React Hooks â€” `useEffect` Dependency Array  
**Category:** Frontend / React.js  
